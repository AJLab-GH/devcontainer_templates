---
name: Build and Push llm-prompt Image

on:
  workflow_dispatch:
  push:
    paths:
      - 'src/llm-prompt/**/*.json'

concurrency:
  group: ${{ github.workflow }}
  cancel-in-progress: true

jobs:
  build-and-push:
    runs-on: ubuntu
    steps:
      - name: Checkout
        id: checkout
        uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11

      - name: build the containers
        run: cd src/llm-prompt && devcontainer build --workspace-folder . --platform linux/amd64 --image-name docker.io/robinmordasiewicz/llm-prompt:latest --output type=docker
      
      - name: docker push
        run: docker push docker.io/robinmordasiewicz/llm-prompt:latest
